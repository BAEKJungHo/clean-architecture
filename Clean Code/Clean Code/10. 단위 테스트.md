# 단위 테스트

## TDD 법칙 세 가지

1. 실패하는 단위 테스트를 작성할 때까지 실제 코드를 작성하지 않는다.
2. 컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 단위 테스트를 작성한다.
3. 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성한다.

위 세 가지 규칙을 따르면 개발과 테스트가 대략 30초 주기로 묶인다. 테스트 코드와 실제 코드가 함께 나올뿐더러 테스트 코드가 실제 코드보다 불과 몇 초 전에 나온다.

## 깨끗한 테스트 코드 유지하기

테스트 코드가 지저분하면, 안짜는 것보다 못하다. 

__실제 코드가 변하면 테스트 코드도 변해야 한다.__ 따라서 테스트 코드가 지저분할 수록 변경하기 어려워진다. 새 버전을 출시할 때마다 팀이 테스트 케이스를 유지하고 보수하는 비용도 늘어난다.
따라서 테스트 슈트를 폐기하게되는데, 테스트 슈트가 없으면 이쪽을 수정해도 반대편이 안전하다는 사실을 보장하지 못하고 결함률이 높아진다.

__즉, 테스트 코드는 실제 코드 못지 않게 중요하다.__

### 테스트는 유연성, 유지보수성, 재사용성을 제공한다.

코드에 유연성, 유지보수성, 재사용성을 제공하는 버팀목이 바로 __단위 테스트__ 이다. 이유는 단순하다. 테스트 코드가 있으면 변경이 두렵지 않기 때문이다.
즉, 테스트 코드가 있다면 `변경`이 쉬워진다.

## 깨끗한 테스트 코드

깨끗한 테스트 코드를 만들기 위해서는 `가독성`이 좋아야 한다. 책의 저자는 실제 코드보다 테스트 코드에서의 가독성이 더 중요할 수도 있다고 말하고 있다.

`BUILD-OPERATE-CHECK` 패턴은 가독성을 늘리기에 좋다.
 
- `BUILD` : 테스트 자료를 만든다.
- `OPERATE` : 테스트 자료를 조작한다.
- `CHECK` : 조작한 결과를 확인한다.

`given-when-then` 을 관례적으로 주석으로 사용한다.

### 도메인에 특화된 테스트 언어

### 이중 표준

테스트 코드에 적용하는 표준은 실제 코드에 적용하는 표준과 확실히 다르다. 가독성이 좋고, 간결하고, 표현이 풍부해야 하지만, 실제 코드만큼 효율적일 필요는 없다.

> 이중 표준이라는 말은 원래 코드와 테스트 코드의 표준은 즉 구현 방식은 다르다는 것이다.


# OCP : 개방-폐쇄 원칙

> 소프트웨어 개체(artifact)는 확장에는 열려있어야 하고, 변경에는 닫혀 있어야 한다.

다시 말해 소프트웨어 개체의 행위는 확장할 수 있어야 하지만, 이때 산출물을 변경해서는 안된다. 소프트웨어 아키텍처를 공부하는 가장 근본적인 이유가 바로 이 때문이다. 만약 요구사항을 살짝 확장하는 데 소프트웨어를 엄청나게 수정해야 한다면, 그 소프트웨어 시스템을 설계한 아키텍트는 엄청난 실패에 맞닥뜨린것이다.

OCP 는 클래스와 모듈을 설계할 때 도움이 되는 원칙이지만, 아키텍처 컴포넌트 수준에서는 OCP 를 훨씬더 잘 고려해야 한다.

## 사고 실험

재무제표를 웹 펭지로 보여주는 시스템이 있다고 생각해보자. 웹 페이지에 표시되는 데이터는 스크롤 할 수 있으며, 음수는 빨간색으로 출력한다. 

소프트웨어 아키텍처가 훌륭하다면 변경되는 코드의 양이 가능한 한 최소화될 것이다. 이상적인 변경량은 0 이다. 어떻게 하면 될까? 서로 다른 목적으로 변경되는 요소를 적절하게 분리하고(SRP), 이들 요소 사이의 의존성을 체계화함으로써(DIP) 변경량을 최소화할 수 있다.

```
재무 데이터 > 재무분석기 > 보고서용 재무데이터 > 보고서를 웹 페이지에 표시 / 보고서를 프린트로 출력
```

여기서 가장 중요한 점은 보고서 생성이 두 개의 책임으로 분리된다는 사실이다. 이처럼 책임을 분리했다면, 두 책임 중 하나에서 변경이 발생하더라도 다른 하나는 변경되지 않도록 소스 코드 의존성도 확실히 조직화해야 한다. 또한, 새로 조직화한 구조에서는 행위가 확장될 때 변겨잉 발생하지 않음을 보장해야 한다.
